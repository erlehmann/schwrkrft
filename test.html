<!DOCTYPE html>
<title>N-body simulation</title>
<script src="js/sylvester.js"></script>
<style>
    * { margin: 0 }
    html, body { height: 100%; width: 100%; }
    canvas { background: #00000A; display: block; margin: auto; position: relative; top: 12.5%; }
    body > a, a > img { border: none; display: block; position: absolute; right: 0; top: 0; z-index: 9001; }
    footer { background: white; bottom: 0; color: black; padding: 1em; position: absolute; }
</style>
<canvas id=universe>here be fallback content</canvas>
<a href=https://github.com/erlehmann/schwrkrft>
    <img src=forkme.png alt="Fork me on GitHub">
</a>
<footer>
    <p>
        <small>
        This program is free software: you can redistribute it and/or modify
        it under the terms of the GNU Affero General Public License as
        published by the Free Software Foundation, either version 3 of the
        License, or (at your option) any later version.

        You should have received a copy of the GNU Affero General Public License
        along with this program.  If not, see &lt;<a href="http://www.gnu.org/licenses/agpl.html">http://www.gnu.org/licenses/agpl.html</a>&gt;.
        </small>
    </p>
</footer>
<script src="js/n-body.js"></script>
<script>
    var canvas = document.getElementById('universe');
    canvas.width = window.innerWidth/1.25;
    canvas.height = window.innerHeight/1.25;

    var universe = new Universe(canvas, 60);
    var camera = new Camera(universe, canvas, 60);

    var stepsize = 4;
    document.onkeypress = function(e) {
        switch(e.keyCode) {
            case 37: // left
                camera.offset = camera.offset.add($V([-stepsize, 0]));
                break;
            case 38: // up
                camera.offset = camera.offset.add($V([0, -stepsize]));
                break;
            case 39: // right
                camera.offset = camera.offset.add($V([stepsize, 0]));
                break;
            case 40: // down
                camera.offset = camera.offset.add($V([0, stepsize]));
                break;
        }
    }

    canvas.addEventListener(
        'click', 
        function(e) {
            var x = e.clientX-canvas.offsetLeft-canvas.width/2;
            var y = e.clientY-canvas.offsetTop-canvas.height/2;
            camera.select(camera.objectAtCanvasCoords($V([x, y]), 40));
        },
        false
    );

    universe.addPointMass($V([0, 100]), $V([10, 0]), 200, 'circle'); // inner planet
    universe.addPointMass($V([0, 240]), $V([7, 0]), 100, 'circle'); // outer planet
    universe.addPointMass($V([20, 240]), $V([7, 2]), 10, 'circle'); // moon of outer planet
    universe.addPointMass($V([0, 0]), $V([0, 0]), 10000, 'circle'); // sun
    universe.addPointMass($V([-320, -320]), $V([4, 8]), 10, 'line'); // lance
    universe.addPointMass($V([100, 100]), $V([4, -8]), 60, 'spaceship'); // triangle

    camera.follow(universe.particles[3]);
    camera.select(universe.particles[0]);
</script>
