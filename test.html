<!DOCTYPE html>
<title>N-body simulation</title>
<script src="js/sylvester.js"></script>
<style>
    * { margin: 0 }
    html, body { height: 100%; width: 100%; }
    canvas { background: #00000A; display: block; margin: auto; position: relative; top: 12.5%; }
    a, a > img { border: none; display: block; position: absolute; right: 0; top: 0; z-index: 9001; }
</style>
<canvas id=universe>here be fallback content</canvas>
<a href=https://github.com/erlehmann/schwrkrft><img src=forkme.png alt="Fork me on GitHub"></a>
<script src="js/n-body.js"></script>
<script>
    var canvas = document.getElementById('universe');
    canvas.width = window.innerWidth/1.25;
    canvas.height = window.innerHeight/1.25;

    var universe = new Universe(canvas, 80);
    var camera = new Camera(universe, canvas, 40);

    var stepsize = 4;
    document.onkeypress = function(e) {
        switch(e.keyCode) {
            case 37: // left
                camera.offset = camera.offset.add($V([-stepsize, 0]));
                break;
            case 38: // up
                camera.offset = camera.offset.add($V([0, -stepsize]));
                break;
            case 39: // right
                camera.offset = camera.offset.add($V([stepsize, 0]));
                break;
            case 40: // down
                camera.offset = camera.offset.add($V([0, stepsize]));
                break;
        }
    }

    canvas.addEventListener(
        'click', 
        function(e) {
            var x = e.clientX-canvas.offsetLeft-canvas.width/2-camera.offset.e(1);
            var y = e.clientY-canvas.offsetTop-canvas.height/2-camera.offset.e(2);
            universe.addPointMass($V([x, y]), $V([Math.random()*10-5, Math.random()*10-5]), Math.random()*1000);
        },
        false
    );

    universe.addPointMass($V([0, 100]), $V([10, 0]), 200); // inner planet
    universe.addPointMass($V([0, 240]), $V([7, 0]), 100); // outer planet
    universe.addPointMass($V([20, 240]), $V([7, 2]), 10); // moon of outer planet
    universe.addPointMass($V([0, 0]), $V([0, 0]), 10000); // sun    
    universe.addPointMass($V([-320, -320]), $V([4, 8]), 60); // comet

    camera.follow(universe.particles[3]);
</script>
